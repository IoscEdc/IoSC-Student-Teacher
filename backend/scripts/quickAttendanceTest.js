const mongoose = require('mongoose');\nconst AttendanceSummary = require('../models/attendanceSummarySchema');\nconst Student = require('../models/studentSchema');\nrequire('dotenv').config();\n\n/**\n * Quick test to check if attendance data exists and the endpoint should work\n */\n\nasync function quickTest() {\n    try {\n        console.log('🔌 Connecting to MongoDB...');\n        await mongoose.connect(process.env.MONGO_URL);\n        console.log('✅ Connected to MongoDB');\n\n        // Test 1: Check if we have any students\n        const studentCount = await Student.countDocuments();\n        console.log(`👥 Total students in database: ${studentCount}`);\n\n        if (studentCount === 0) {\n            console.log('❌ No students found in database');\n            return;\n        }\n\n        // Test 2: Get a sample student\n        const sampleStudent = await Student.findOne().select('_id name rollNum');\n        console.log(`👤 Sample student: ${sampleStudent.name} (ID: ${sampleStudent._id})`);\n\n        // Test 3: Check if we have any attendance summaries\n        const summaryCount = await AttendanceSummary.countDocuments();\n        console.log(`📊 Total attendance summaries: ${summaryCount}`);\n\n        // Test 4: Check if the sample student has attendance data\n        const studentSummaries = await AttendanceSummary.find({ studentId: sampleStudent._id })\n            .populate('subjectId', 'subName')\n            .populate('classId', 'sclassName');\n        \n        console.log(`📚 Attendance summaries for ${sampleStudent.name}: ${studentSummaries.length}`);\n        \n        if (studentSummaries.length > 0) {\n            console.log('\\n📋 Sample attendance data:');\n            studentSummaries.forEach((summary, index) => {\n                console.log(`  ${index + 1}. Subject: ${summary.subjectId?.subName || 'Unknown'}`);\n                console.log(`     Total Sessions: ${summary.totalSessions}`);\n                console.log(`     Present: ${summary.presentCount}`);\n                console.log(`     Percentage: ${summary.attendancePercentage}%`);\n            });\n        } else {\n            console.log('❌ No attendance data found for sample student');\n            console.log('\\n💡 This explains why the API returns 500 or empty data');\n            console.log('   You need to:');\n            console.log('   1. Mark some attendance for students');\n            console.log('   2. Or run the attendance summary generation script');\n        }\n\n        // Test 5: Check if we have any attendance records\n        const AttendanceRecord = require('../models/attendanceRecordSchema');\n        const recordCount = await AttendanceRecord.countDocuments();\n        console.log(`\\n📝 Total attendance records: ${recordCount}`);\n\n        if (recordCount === 0) {\n            console.log('❌ No attendance records found');\n            console.log('   This means no attendance has been marked yet');\n        }\n\n    } catch (error) {\n        console.error('❌ Test failed:', error.message);\n    } finally {\n        await mongoose.disconnect();\n        console.log('\\n🔌 Disconnected from MongoDB');\n    }\n}\n\nconsole.log('🧪 Quick Attendance Data Test');\nconsole.log('============================');\nquickTest().catch(console.error);"